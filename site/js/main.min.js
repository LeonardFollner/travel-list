var renderList;$(document).ready(function(){function a(){$.ajax({url:"data.json",dataType:"json",async:!1,success:function(a){f=a}}),console.log(f),$("#list-info__name").val(f.name),$("#list-info__location").val(f.location);var a=$("#list-info__lists");$.each(f.lists,function(){var b=this.name,c=this.id,d=this.enabled,e=$("<div class='list-info__option'></div>").data("id",c),f=$("<label>"+b+"</label>"),g=$("<input type='checkbox' class='list-info__option__checkbox'>").prop("checked",d);f.append(g),e.append(f),a.append(e)}),$(".list-info__option__checkbox").on("change",function(){var a=$(this).parent().parent().data("id");d(a).enabled=$(this).prop("checked")})}function b(a){var b=$("<thead></thead>"),c=$("<th>Kategorie</th>"),d=$("<th>Mitnehmen</th>"),e=$("<th>Menge</th>"),f=$("<th>Eingepackt</th>"),j=$("<th>Notitzen</th>");b.append(c),b.append(d),b.append(e),b.append(f),b.append(j),i.append(b),$.each(a.lists,function(){if(this.enabled){var a=this.name,b=this.items;h+=b.length;var c=$("<tbody></tbody>").attr("id","pack-list__"+a).data("id",this.id);i.append(c),$.each(b,function(d){var e=$("<tr></tr>").data("id",this.id);if(0===d){var f=$("<th class='list__name'>"+a+"</th>").attr("rowspan",b.length);e.append(f)}this.checked&&(g+=1);var h=$("<td>"+this.name+"</td>"),i=$("<input type='number' class='item__amount' min='1'>").val(this.amount),j=$("<td></td>");j.append(i);var k=$("<td></td>"),l=$("<input type='checkbox' class='item__checkbox'>").attr("checked",this.checked);k.append(l);var m=$("<td></td>"),n=$("<input type='text'>").val(this.notes);m.append(n);var o=$("<td class='item__delete'><i class='fa fa-trash-o' aria-hidden='true'></i></td>");e.append(h),e.append(j),e.append(k),e.append(m),e.append(o),c.append(e)})}})}function c(a){var b=a.split("_"),c=b[0],d=b[1];return f.lists[c].items[d]}function d(a){return f.lists[a]}function e(){var a=g/h,b=100*a+"%",c=Math.floor(255*(1-a)),d=Math.floor(255*a),e="rgb("+c+", "+d+", 0)";$("#progress-bar").css("width",b).css("background-color",e)}var f={},g=0,h=0,i=$("#pack-list");a(),renderList=function(){$(".list-info").hide(),b(f),e(),$(".item__delete").on("click",function(){var a=$(this).parent();a.hide("slow");var b=a.data("id");c(b).enabled=!1,h-=1,c(b).checked&&(g-=1),e()}),$(".item__checkbox").on("change",function(){var a=$(this).parent().parent();c(a.data("id")).checked=$(this).prop("checked"),$(this).prop("checked")?g+=1:g-=1,e()}),$(".item__amount").on("change",function(){var a=$(this).parent().parent();c(a.data("id")).amount=$(this).val()})}});