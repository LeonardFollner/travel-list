function clearAllCookies(){Cookies.remove("lists");for(var a=0;a<50;a++)Cookies.remove("list-"+a)}var newList,chooseList;$(document).ready(function(){function a(){$.ajax({url:"data.json",dataType:"json",async:!1,success:function(a){m=a,o=a}});var a=$("#list-info__lists");if($.each(o.lists,function(){var b=this.name,c=this.id,d=this.enabled,e=$("<div class='list-info__option'></div>").data("id",c),f=$("<label>"+b+"</label>"),g=$("<input type='checkbox' class='list-info__option__checkbox'>").prop("checked",d);f.append(g),e.append(f),a.append(e)}),$(".list-info__option__checkbox").on("change",function(){var a=$(this).parent().parent().data("id");d(a).enabled=$(this).prop("checked")}),void 0!==n){var b=$("#lists-list");$.each(n,function(){var a=$("<tr class='lists-list__list' onclick='chooseList(this);'><td>"+this[0]+"</td></tr>").data("id",this[1]);b.append(a)})}}function b(){var a=$("<thead></thead>"),b=$("<th>Kategorie</th>"),c=$("<th>Mitnehmen</th>"),d=$("<th>Menge</th>"),e=$("<th>Eingepackt</th>"),f=$("<th>Notitzen</th>");a.append(b),a.append(c),a.append(d),a.append(e),a.append(f),r.append(a),$.each(o.lists,function(){if(this.enabled){var a=this.name,b=this.items,c=$("<tbody></tbody>").attr("id","pack-list__"+a).data("id",this.id);r.append(c),$.each(b,function(d){if(this.enabled){q+=1;var e=$("<tr></tr>").data("id",this.id);if(0===d){var f=$("<th class='list__name'>"+a+"</th>").attr("rowspan",b.length);e.append(f)}this.checked&&(p+=1);var g=$("<td>"+this.name+"</td>"),h=$("<input type='number' class='item__amount' min='1'>").val(this.amount),i=$("<td></td>");i.append(h);var j=$("<td></td>"),k=$("<input type='checkbox' class='item__checkbox'>").attr("checked",this.checked);j.append(k);var l=$("<td></td>"),m=$("<input type='text' class='item__notes'>").val(this.notes);l.append(m);var n=$("<td class='item__delete'><i class='fa fa-trash-o' aria-hidden='true'></i></td>");e.append(g),e.append(i),e.append(j),e.append(l),e.append(n),c.append(e)}})}})}function c(a){var b=a.split("_"),c=b[0],d=b[1];return o.lists[c].items[d]}function d(a){return o.lists[a]}function e(){var a=p/q,b=100*a+"%",c=Math.floor(255*(1-a)),d=Math.floor(255*a),e="rgb("+c+", "+d+", 0)";$("#progress-bar").css("width",b).css("background-color",e)}function f(){console.log(o),$(".list-info").hide(),$("#lists-list").hide(),$("#list-name").text(o.name),b(o),e(),$(".item__delete").on("click",function(){var a=$(this).parent();a.hide("slow");var b=a.data("id");c(b).enabled=!1,q-=1,c(b).checked&&(p-=1),e(),g()}),$(".item__checkbox").on("change",function(){var a=$(this).parent().parent();c(a.data("id")).checked=$(this).prop("checked"),$(this).prop("checked")?p+=1:p-=1,e(),g()}),$(".item__amount").on("change",function(){var a=$(this).parent().parent();c(a.data("id")).amount=$(this).val(),g()}),$(".item__notes").on("change",function(){var a=$(this).parent().parent();c(a.data("id")).notes=$(this).val(),g()})}function g(){h(l)}function h(a){var b=[],c=[],d=[];c.push(o.name),c.push(o.id),c.push(o.location),c.push(o.start),c.push(o.end),$.each(o.lists,function(){this.enabled&&$.each(this.items,function(){if(this.enabled){var a=[];a.push(this.id),a.push(this.checked),a.push(this.amount),a.push(this.notes),d.push(a)}})}),b.push(c),b.push(d),Cookies.set("list-"+a,b)}function i(a){return Cookies.getJSON("list-"+a)}function j(){Cookies.set("lists",n)}function k(){return Cookies.getJSON("lists")}var l,m={},n=k(),o=m,p=0,q=0,r=$("#pack-list");newList=function(){$.each(o.lists,function(){this.enabled&&$.each(this.items,function(){this.enabled=!0})}),l=0,void 0!==n&&(l=n.length);var a=$("#list-info__name").val(),b=$("#list-info__location").val(),c=$("#list-info__start").val(),d=$("#list-info__end").val();o.id=l,o.name=a,o.location=b,o.start=c,o.end=d;var e=[];e.push(a),e.push(l),void 0===n&&(n=[]),n.push(e),j(),g(),f()},chooseList=function(a){l=$(a).data("id");var b=i(l);o.id=b[0][1],o.name=b[0][0],o.location=b[0][2],o.start=b[0][3],o.end=b[0][4],$.each(b[1],function(){var a=this[0];d(a.split("_")[0]).enabled=!0,c(a).enabled=!0,c(a).checked=this[1],c(a).amount=this[2],c(a).notes=this[3]}),f()},a()});